<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">

    <style>
        .nav-link:hover {
            background-color: #343a40;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row min-vh-100">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-dark text-white p-3 d-flex flex-column justify-content-between">
                <h4 class="text-center">Dashboard</h4>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="profile">
                            <i class="bi bi-person-circle me-2"></i> Profile
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="activity">
                            <i class="bi bi-activity me-2"></i>Activity
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="classes">
                            <i class="bi bi-journal-bookmark me-2"></i>Classes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="assignments">
                            <i class="bi bi-stack me-2"></i>Assignments
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="groups">
                            <i class="bi bi-people me-2"></i>Groups
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="resources">
                            <i class="bi bi-stack me-2"></i>Resources
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="grades">
                            <i class="bi bi-bar-chart me-2"></i>Grades
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="calendar">
                            <i class="bi bi-calendar me-2"></i>Calendar
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="settings">
                            <i class="bi bi-gear me-2"></i>Settings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="#" data-page="logout">
                            <i class="bi bi-box-arrow-right me-2"></i>Logout
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 col-lg-10 p-4" id="main-content">
                <h2>Welcome to your dashboard!</h2>
                <p>Select an item on the sidebar to view content!</p>
            </main>
        </div>
    </div>
    <script src="dashboard.js"></script>
    <script>
        // script for getting user profile
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function (e) {
                const page = this.getAttribute('data-page');
                if (page === 'profile') {
                    fetch('http://localhost:3000/api/profile/')  // Replace 1 with dynamic ID later
                        .then(res => res.json())
                        .then(data => {
                            const content = `
                        <h2>${data.name}</h2>
                        <p>Email: ${data.email}</p>
                        <p>Major: ${data.major}</p>
                    `;
                            document.getElementById('main-content').innerHTML = content;
                        })
                        .catch(err => {
                            document.getElementById('main-content').innerHTML = '<p>Error loading profile.</p>';
                            console.error(err);
                        });
                }
            });
        });
    </script>
    <script>
        // script for getting user assignmetns
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function (e) {
                const page = this.getAttribute('data-page');
    
                if (page === 'assignments') {
                    const userId = 'USER_ID_HERE'; // dynamically set this
    
                    fetch(`http://localhost:3000/api/assignments/${userId}`)
                        .then(res => res.json())
                        .then(data => {
                            if (data.error) {
                                document.getElementById('main-content').innerHTML = '<p>No assignments found.</p>';
                                return;
                            }
    
                            let html = '<h2>Your Assignments</h2><ul>';
                            data.forEach(assn => {
                                html += `<li><strong>${assn.name}</strong> (${assn.type}) — ${assn.status}<br>Start: ${assn.startDate}, End: ${assn.endDate}</li>`;
                            });
                            html += '</ul>';
    
                            document.getElementById('main-content').innerHTML = html;
                        })
                        .catch(err => {
                            console.error(err);
                            document.getElementById('main-content').innerHTML = '<p>Error loading assignments.</p>';
                        });
                }
            });
        });
    </script>
    <script>
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function (e) {
                const page = this.getAttribute('data-page');
    
                if (page === 'groups') {
                    const userId = 'USER_ID_HERE'; // Replace dynamically
    
                    fetch(`http://localhost:3000/api/groups/${userId}`)
                        .then(res => res.json())
                        .then(data => {
                            if (data.error) {
                                document.getElementById('main-content').innerHTML = '<p>No groups found.</p>';
                                return;
                            }
    
                            let html = '<h2>Your Groups</h2><ul>';
                            data.forEach(group => {
                                html += `<li><strong>${group.groupName}</strong> — Course: ${group.courseName}</li>`;
                            });
                            html += '</ul>';
    
                            document.getElementById('main-content').innerHTML = html;
                        })
                        .catch(err => {
                            console.error(err);
                            document.getElementById('main-content').innerHTML = '<p>Error loading groups.</p>';
                        });
                }
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
</body>
</html>
